<!DOCTYPE html>
<!-- L'attributo lang verrà aggiornato da i18n.js -->
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Il title può essere aggiornato da JS se necessario, o rimanere generico -->
    <title>SynergyRecycle.B</title>
    <style>
        /* --- STILI CSS INVARIATI --- */
        :root { --spacing-sm: 1rem; --spacing-md: 2rem; --spacing-lg: 4rem; --container-width: 1200px; --primary-blue: #3a7c8c; --dark-gray: #333; --light-gray: #ccc; --primary-green: #5aad57; --secondary-green: #8BC34A; --tertiary-green: #c2e6c0; --background-green: #f5f9f5; --blockchain-blue: #4c7f9c; --laser-color: #9c27b0; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: "Segoe UI", system-ui, -apple-system, sans-serif; line-height: 1.5; color: #333; background-color: var(--background-green); position: relative; overflow-x: hidden; }
        .container { max-width: 1200px; width: 100%; margin: 0 auto; padding: 20px; position: relative; z-index: 2; }
        /* ... (tutti gli altri stili CSS rimangono invariati) ... */
        .language-dropdown { /* Assicurati che non ci sia display: none !important; */ display: none; /* ... altri stili dropdown ... */ }
        .language-dropdown.show { display: block; } /* Questa classe viene aggiunta/rimossa da JS */
         /* --- FINE STILI CSS --- */
    </style>
</head>
<body>
    <!-- Background decorations -->
    <div class="bg-decoration decoration-1"></div>
    <div class="bg-decoration decoration-2"></div>

    <div class="container">
        <!-- Intestazione -->
        <header>
            <a href="./" class="logo">
                <img src="./assets/img/logo da email.png" alt="Logo SynergyRecycle.B" data-i18n-attr="alt:header.logoAlt">
                <span data-i18n="header.logoText">SynergyRecycle.B</span>
            </a>
            <nav class="main-nav">
                <a href="./contatore.html" class="green-button" data-i18n="header.nav.actionButton">"Un'azione, Mille Impatti."</a>
                <a href="./" class="button" data-i18n="header.nav.home">Home</a>
                <a href="./servizi.html" class="button" data-i18n="header.nav.services">Servizi</a>
                <a href="./sostenerci.html" class="button" data-i18n="header.nav.supportUs">Supportaci</a>
                <a href="./contattaci.html" class="button" data-i18n="header.nav.contactUs">Contattaci</a>
                <a href="./roadmap.html" class="button" data-i18n="header.nav.roadmap">Roadmap</a>
                <!-- Language Selector HTML (Desktop) -->
                <div class="language-selector">
                    <button class="language-btn" id="language-btn" aria-label="Seleziona lingua" data-i18n-attr="aria-label:header.langSelector.ariaLabel" aria-haspopup="true" aria-expanded="false">🌐</button>
                    <div class="language-dropdown" id="language-dropdown" role="menu">
                        <div class="language-option" data-lang="en" role="menuitem"><span class="language-flag">🇬🇧</span> <span data-i18n="header.langSelector.en">English</span></div>
                        <div class="language-option" data-lang="es" role="menuitem"><span class="language-flag">🇪🇸</span> <span data-i18n="header.langSelector.es">Español</span></div>
                        <div class="language-option" data-lang="de" role="menuitem"><span class="language-flag">🇩🇪</span> <span data-i18n="header.langSelector.de">Deutsch</span></div>
                        <div class="language-option" data-lang="it" role="menuitem"><span class="language-flag">🇮🇹</span> <span data-i18n="header.langSelector.it">Italiano</span></div>
                        <div class="language-option" data-lang="fr" role="menuitem"><span class="language-flag">🇫🇷</span> <span data-i18n="header.langSelector.fr">Français</span></div>
                    </div>
                </div>
                <!-- END Language Selector HTML (Desktop) -->
            </nav>
            <button id="hamburger-btn" class="hamburger-btn" aria-expanded="false" aria-label="Menu" data-i18n-attr="aria-label:header.hamburgerAriaLabel">☰</button>
        </header>

        <!-- Navigazione mobile -->
        <nav class="mobile-nav" id="mobile-nav">
            <a href="./contatore.html" class="green-button" data-i18n="header.nav.actionButton">"Un'azione, Mille Impatti."</a>
            <a href="./" class="button" data-i18n="header.nav.home">Home</a>
            <a href="./servizi.html" class="button" data-i18n="header.nav.services">Servizi</a>
            <a href="./sostenerci.html" class="button" data-i18n="header.nav.supportUs">Supportaci</a>
            <a href="./contattaci.html" class="button" data-i18n="header.nav.contactUs">Contattaci</a>
            <a href="./roadmap.html" class="button" data-i18n="header.nav.roadmap">Roadmap</a>
            <!-- Language Selector HTML (Mobile) -->
            <div class="language-selector">
                <button class="language-btn" id="mobile-language-btn" aria-haspopup="true" aria-expanded="false">🌐 <span data-i18n="header.mobileNav.langSelectorButton">Lingua</span></button>
                <div class="language-dropdown" id="mobile-language-dropdown" role="menu">
                    <div class="language-option" data-lang="en" role="menuitem"><span class="language-flag">🇬🇧</span> <span data-i18n="header.langSelector.en">English</span></div>
                    <div class="language-option" data-lang="es" role="menuitem"><span class="language-flag">🇪🇸</span> <span data-i18n="header.langSelector.es">Español</span></div>
                    <div class="language-option" data-lang="de" role="menuitem"><span class="language-flag">🇩🇪</span> <span data-i18n="header.langSelector.de">Deutsch</span></div>
                    <div class="language-option" data-lang="it" role="menuitem"><span class="language-flag">🇮🇹</span> <span data-i18n="header.langSelector.it">Italiano</span></div>
                    <div class="language-option" data-lang="fr" role="menuitem"><span class="language-flag">🇫🇷</span> <span data-i18n="header.langSelector.fr">Français</span></div>
                </div>
            </div>
            <!-- END Language Selector HTML (Mobile) -->
        </nav>

        <!-- Banner -->
        <div class="banner" data-i18n="banner.text">
            SynergyRecycle.B: "Ogni gesto conta, noi insieme facciamo la differenza."
        </div>
    </div> <!-- Fine container per header/banner -->

    <main>
        <!-- Hero Section -->
        <section class="hero">
            <div class="container">
                <div class="image-container">
                     <h1 class="hero-title" data-i18n="hero.title">"La nostra Piattaforma: per aiutarci, ad aiutare il Mondo."</h1>
                     <p class="hero-subtitle" data-i18n="hero.subtitle">Costruiamo esperienze digitali, rivoluzioniamo il modo di fare, distinguiamoci.</p>
                </div>
            </div>
        </section>

        <!-- Blockchain Visualization Section -->
        <section class="section">
            <div class="container">
                <h2 class="section-title" data-i18n="blockchain.title">Con la Blockchain Polygon il futuro sarà sostenibile</h2>
                <p class="text-center" style="color: #557669; max-width: 700px; margin: -20px auto 30px auto;" data-i18n="blockchain.paragraph">La nostra tecnologia basata su blockchain Polygon connette ogni fase del riciclo per massimizzare l'impatto positivo, garantendo trasparenza e tracciabilità.</p>
                <div class="blockchain-visualization" id="blockchain-viz">
                    <!-- Riempito da JS -->
                </div>
            </div>
        </section>

        <!-- Strategia Section -->
        <section class="section" style="background: linear-gradient(135deg, var(--background-green), #eaf3ea); padding-bottom: var(--spacing-md);">
             <div class="container">
                <h2 class="section-title" data-i18n="success.title">Guidiamo il Successo attraverso: Efficienza, Affidabilità, Innovazione, Scalabilità.</h2>
                <p class="text-center" style="color: #557669;" data-i18n="success.paragraph1">Mettiamo a punto un'esperienza clienti unica.</p>
                <p class="text-center" style="color: #557669; margin-bottom: 0;" data-i18n="success.paragraph2">Strategie digitali e ricerche su misura basate su Affidabilità e Innovazione.</p>
            </div>
        </section>

        <!-- Valori Section -->
        <section class="section">
            <div class="container">
                <h2 class="section-title" data-i18n="pillars.title">I nostri pilastri fondamentali</h2>
                <div class="values-grid">
                    <div class="value-card">
                        <h3 data-i18n="pillars.efficiency.title">Efficienza</h3>
                        <p data-i18n="pillars.efficiency.text">Ottimizziamo processi e risorse per il massimo risultato con il minimo spreco.</p>
                        <img src="./assets/img/efficienz.jpeg" alt="Icona Efficienza" data-i18n-attr="alt:pillars.efficiency.imgAlt">
                    </div>
                    <div class="value-card">
                        <h3 data-i18n="pillars.reliability.title">Affidabilità</h3>
                         <p data-i18n="pillars.reliability.text">Garantiamo trasparenza e sicurezza grazie alla tecnologia blockchain.</p>
                        <img src="./assets/img/affidabilita.jpeg" alt="Icona Affidabilità" data-i18n-attr="alt:pillars.reliability.imgAlt">
                    </div>
                    <div class="value-card">
                        <h3 data-i18n="pillars.innovation.title">Innovazione</h3>
                         <p data-i18n="pillars.innovation.text">Sviluppiamo costantemente soluzioni all'avanguardia per la sostenibilità.</p>
                        <img src="./assets/img/innovazione.jpeg" alt="Icona Innovazione" data-i18n-attr="alt:pillars.innovation.imgAlt">
                    </div>
                    <div class="value-card">
                        <h3 data-i18n="pillars.scalability.title">Scalabilità</h3>
                        <p data-i18n="pillars.scalability.text">Progettiamo sistemi flessibili pronti a crescere con la nostra community.</p>
                        <img src="./assets/img/donna.png" alt="Icona Scalabilità" data-i18n-attr="alt:pillars.scalability.imgAlt">
                    </div>
                </div>
            </div>
        </section>

        <!-- Offerta Section -->
        <section class="section building-section">
            <div class="container">
                <h2 class="section-title" data-i18n="building.title">Scopri cosa stiamo Costruendo.</h2>
                <div class="building-content">
                    <div class="building-text">
                        <h3 data-i18n="building.subtitle1">Trasformazione digitale per la Sostenibilità</h3>
                        <p data-i18n="building.paragraph1">Aiutiamo persone e aziende a prosperare in un panorama eco-consapevole in continua evoluzione.</p>
                        <h3 data-i18n="building.subtitle2">Sviluppo Web & App Dedicati</h3>
                        <p data-i18n="building.paragraph2">Mettiamo a frutto la nostra esperienza per fornire strumenti intuitivi e potenti, dando a tutti la possibilità di contribuire e crescere.</p>
                        <div class="app-download-buttons">
                            <a href="#" class="btn" target="_blank" style="opacity: 0.7; cursor: not-allowed;" data-i18n="building.appButton.appStore">Coming Soon: App Store</a>
                            <a href="#" class="btn" target="_blank" style="opacity: 0.7; cursor: not-allowed;" data-i18n="building.appButton.googlePlay">Coming Soon: Google Play</a>
                        </div>
                    </div>
                    <div class="building-image">
                        <img src="./assets/img/persona.jpeg" alt="Persona che interagisce con tecnologia sostenibile" data-i18n-attr="alt:building.imgAlt">
                    </div>
                </div>
            </div>
        </section>

        <!-- Call to Action -->
        <section class="section" style="background: linear-gradient(135deg, #f0f7ee, var(--tertiary-green));">
            <div class="container">
                <h2 class="section-title" style="font-size: 1.8rem;" data-i18n="cta.title1">Tutte le Persone fanno molto per se stessi, ma ancora poco per il nostro Pianeta.</h2>
                <h2 class="section-title" style="font-size: 2rem;" data-i18n="cta.title2">Entra a far parte di SynergyRecycle.B: insieme potremmo rivoluzionare il futuro del nostro Mondo.</h2>
                <p class="text-center" style="color: #557669;" data-i18n="cta.paragraph">Unisciti a noi per migliorare, e insieme miglioreremo il nostro Pianeta.</p>
                <div style="text-align: center; margin-top: var(--spacing-md);">
                    <a href="./sostenerci.html" class="btn" data-i18n="cta.button">Inizia ora</a>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer Copyright -->
    <footer class="site-footer">
        <div class="container">
            <p class="copyright-text">
                © <span id="copyright-year"></span> <span data-i18n="header.logoText">SynergyRecycle.B</span>.
                 - <span data-i18n="footer.allRightsReserved">Tutti i diritti riservati</span>
                 <br>
                Herford, Germany | <a href="mailto:SynergyRecycle.B@gmail.com">SynergyRecycle.B@gmail.com</a>
            </p>
        </div>
    </footer>

    <!-- Script JS Inline (Solo per Hamburger, Copyright, Blockchain) -->
    <script>
        // Funzioni Blockchain definite globalmente
        const blockchainVizContainer = document.getElementById('blockchain-viz');

        window.createBlockchainVisualization = function() {
            // La logica è la stessa di prima, ma ora è globale
            if (!blockchainVizContainer || blockchainVizContainer.dataset.initialized === 'true') return;
            blockchainVizContainer.innerHTML = '';
            blockchainVizContainer.dataset.initialized = 'true';
            console.log("createBlockchainVisualization called"); // DEBUG

            const currentTranslations = window.currentTranslations || {}; // Legge traduzioni globali
            const labels = currentTranslations.blockchain?.labels;
            const blockLabels = labels
                ? [labels.collection, labels.verification, labels.processing, labels.recycling, labels.reuse]
                : ['Raccolta', 'Verifica', 'Processo', 'Riciclo', 'Riutilizzo']; // Fallback IT

            console.log("Using blockchain labels:", blockLabels); // DEBUG

            const blocks = [];
            const isMobile = window.innerWidth <= 768;
            const isSmallMobile = window.innerWidth <= 480;

            blockLabels.forEach((label, i) => {
                const block = document.createElement('div');
                block.className = 'block';
                block.textContent = label || `Block ${i+1}`;
                let topPos = 40; let leftPos;
                if (isSmallMobile && blockLabels.length > 3) {
                    topPos = (i * 20) + 5; leftPos = 40;
                    const blockWidthEstimate = 50;
                    block.style.left = `calc(${leftPos}% - ${blockWidthEstimate / 2}px)`;
                    block.style.top = `${topPos}%`;
                } else {
                    leftPos = (i * (100 / blockLabels.length)) + (100 / (blockLabels.length * 2));
                    block.style.left = `${leftPos}%`; block.style.top = `${topPos}%`;
                    block.style.transform = 'translateX(-50%)';
                }
                blockchainVizContainer.appendChild(block); blocks.push(block);
                block.style.opacity = '0'; block.style.animation = `fadeIn 0.5s ${i * 0.2}s forwards`;
            });

            if (!document.getElementById('blockchain-animations')) {
                 const style = document.createElement('style');
                 style.id = 'blockchain-animations';
                 style.textContent = `
                     @keyframes fadeIn { from { opacity: 0; transform: ${isSmallMobile && blockLabels.length > 3 ? 'translateX(20px)' : 'translateY(20px)'}; } to { opacity: 1; transform: ${isSmallMobile && blockLabels.length > 3 ? 'translateX(0)' : 'translateY(0)'}; } }
                     @keyframes laserAppear { from { transform: scaleX(0); opacity: 0; } to { transform: scaleX(1); opacity: 1; } }
                 `;
                 document.head.appendChild(style);
             }

             let attempts = 0;
             function connectWhenReady() {
                 if (blocks.every(b => b.offsetParent !== null && b.offsetWidth > 0) || attempts > 20) {
                    setTimeout(() => {
                         for (let i = 0; i < blocks.length - 1; i++) { connectBlocksWithLaser(blocks[i], blocks[i+1]); }
                    }, 100 + (500 * blockLabels.length));
                 } else { attempts++; requestAnimationFrame(connectWhenReady); }
             }
             requestAnimationFrame(connectWhenReady);
        }

        window.connectBlocksWithLaser = function(blockA, blockB) {
            // La logica è la stessa di prima, ma ora è globale
            if (!blockchainVizContainer || !blockA || !blockB) return;
            const laser = document.createElement('div'); laser.className = 'laser';
            const rectA = blockA.getBoundingClientRect(); const rectB = blockB.getBoundingClientRect();
            const containerRect = blockchainVizContainer.getBoundingClientRect();
            let x1, y1, x2, y2;
            const isSmallMobileLayout = window.innerWidth <= 480 && blockA.style.top !== '40%';

            if (isSmallMobileLayout) {
                x1 = rectA.left + (rectA.width / 2) - containerRect.left; y1 = rectA.top + rectA.height - containerRect.top;
                x2 = rectB.left + (rectB.width / 2) - containerRect.left; y2 = rectB.top - containerRect.top;
            } else {
                 x1 = rectA.left + rectA.width - containerRect.left; y1 = rectA.top + (rectA.height / 2) - containerRect.top;
                 x2 = rectB.left - containerRect.left; y2 = rectB.top + (rectB.height / 2) - containerRect.top;
            }
            const length = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));
            const angle = Math.atan2(y2 - y1, x2 - x1) * 180 / Math.PI;
            laser.style.width = `${length}px`; laser.style.left = `${x1}px`; laser.style.top = `${y1}px`;
            laser.style.transform = `rotate(${angle}deg)`; laser.style.transformOrigin = 'left center';
            laser.style.opacity = '0'; laser.style.animation = `laserAppear 0.8s forwards, laserPulse 2s infinite 0.8s`;
            blockchainVizContainer.appendChild(laser);
        }

        // Esecuzione solo di codice NON i18n dentro DOMContentLoaded
        document.addEventListener('DOMContentLoaded', function() {
             // --- COPYRIGHT YEAR ---
             const yearSpan = document.getElementById('copyright-year');
             if (yearSpan) {
                 yearSpan.textContent = new Date().getFullYear();
             }

             // --- HAMBURGER MENU TOGGLE ---
             const hamburgerBtn = document.getElementById('hamburger-btn');
             const mobileNav = document.getElementById('mobile-nav');

             if (hamburgerBtn && mobileNav) {
                 const toggleAriaExpanded = (element) => {
                     const isExpanded = element.getAttribute('aria-expanded') === 'true';
                     element.setAttribute('aria-expanded', !isExpanded);
                 };

                 hamburgerBtn.addEventListener('click', function() {
                     mobileNav.classList.toggle('active');
                     toggleAriaExpanded(this);
                 });

                 const mobileNavLinks = mobileNav.querySelectorAll('a.button, a.green-button');
                 mobileNavLinks.forEach(link => {
                     link.addEventListener('click', function() {
                         if (!link.closest('.language-selector')) {
                             mobileNav.classList.remove('active');
                             hamburgerBtn.setAttribute('aria-expanded', 'false');
                         }
                     });
                 });
             }

             // --- Blockchain Resize Listener ---
             let resizeTimer;
             window.addEventListener('resize', function() {
                 clearTimeout(resizeTimer);
                 resizeTimer = setTimeout(function() {
                     if (blockchainVizContainer && typeof window.createBlockchainVisualization === 'function') {
                         blockchainVizContainer.removeAttribute('data-initialized');
                         window.createBlockchainVisualization();
                     }
                 }, 250);
             });

             console.log("Inline script (Hamburger, Copyright, Resize) executed."); // DEBUG
        });
    </script>

    <!-- Script I18N Esterno (DEVE ESSERE DOPO L'HTML E DOPO LO SCRIPT INLINE CHE DEFINISCE LE FUNZIONI GLOBALI) -->
    <script src="./assets/js/i18n.js" defer></script>

</body>
</html>
